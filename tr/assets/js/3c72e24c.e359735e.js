"use strict";(self.webpackChunkservice=self.webpackChunkservice||[]).push([[4959],{32270:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>s,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>d,toc:()=>t});var l=n(85893),r=n(11151);const o={title:"\ud83d\udcbe Worker",description:"Allora worker installation guide.",image:"./img/Allora-Service-Cover.jpg",keywords:["Allora","AI","Layer 1","installation"]},i="Allora Price Prediction Worker Node Kurulumu",d={id:"Testnet/allora/worker",title:"\ud83d\udcbe Worker",description:"Allora worker installation guide.",source:"@site/docs/Testnet/allora/worker.md",sourceDirName:"Testnet/allora",slug:"/Testnet/allora/worker",permalink:"/tr/docs/Testnet/allora/worker",draft:!1,unlisted:!1,editUrl:"https://github.com/AnatolianTeam/Anatolian-Team-Services/tree/master/docs/Testnet/allora/worker.md",tags:[],version:"current",frontMatter:{title:"\ud83d\udcbe Worker",description:"Allora worker installation guide.",image:"./img/Allora-Service-Cover.jpg",keywords:["Allora","AI","Layer 1","installation"]},sidebar:"tutorialSidebar",previous:{title:"Allora",permalink:"/tr/docs/Testnet/allora/"},next:{title:"Eclipse",permalink:"/tr/docs/Testnet/eclipse/"}},s={image:n(979).Z},t=[{value:"Sistemi G\xfcncelleme, Python Kurulumu ve Gerekli K\xfct\xfcphanelerin Kurulmas\u0131",id:"sistemi-g\xfcncelleme-python-kurulumu-ve-gerekli-k\xfct\xfcphanelerin-kurulmas\u0131",level:2},{value:"Docker Kurulumu",id:"docker-kurulumu",level:2},{value:"Docker Compose Kurulumu",id:"docker-compose-kurulumu",level:2},{value:"Go Kural\u0131m",id:"go-kural\u0131m",level:3},{value:"Allora ve C\xfczdan Kurulumu",id:"allora-ve-c\xfczdan-kurulumu",level:2},{value:"Allora C\xfczdan Kurulumu",id:"allora-c\xfczdan-kurulumu",level:3},{value:"Mevcut C\xfczdan\u0131 \u0130\xe7e Aktarma",id:"mevcut-c\xfczdan\u0131-i\u0307\xe7e-aktarma",level:3},{value:"Allora A\u011f\u0131n\u0131 Ekleme",id:"allora-a\u011f\u0131n\u0131-ekleme",level:3},{value:"Allora Kontrol Paneli",id:"allora-kontrol-paneli",level:3},{value:"Musluk",id:"musluk",level:3},{value:"Allora Worker Kurulumu",id:"allora-worker-kurulumu",level:3},{value:"Data Dosyalar\u0131n\u0131 Olu\u015fturma",id:"data-dosyalar\u0131n\u0131-olu\u015fturma",level:3},{value:"Data Dosya \u0130zinlerini Ayarlama",id:"data-dosya-i\u0307zinlerini-ayarlama",level:3},{value:"Head Key Olu\u015fturma",id:"head-key-olu\u015fturma",level:3},{value:"Worker Key Olu\u015fturma",id:"worker-key-olu\u015fturma",level:3},{value:"Head Key \xd6\u011frenme",id:"head-key-\xf6\u011frenme",level:3},{value:"docker-compose.yml Dosyas\u0131n\u0131 Haz\u0131rlama",id:"docker-composeyml-dosyas\u0131n\u0131-haz\u0131rlama",level:3},{value:"Var Olan Dosyay\u0131 Silme",id:"var-olan-dosyay\u0131-silme",level:4},{value:"Yeni Dosyay\u0131 Haz\u0131rlama",id:"yeni-dosyay\u0131-haz\u0131rlama",level:4},{value:"Allora Worker Ba\u015flatma",id:"allora-worker-ba\u015flatma",level:2},{value:"Node Kontrol\xfc",id:"node-kontrol\xfc",level:3},{value:"Allora Puanlar\u0131",id:"allora-puanlar\u0131",level:2},{value:"Allora Silme Komutlar\u0131",id:"allora-silme-komutlar\u0131",level:4}];function c(e){const a={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",img:"img",p:"p",pre:"pre",...(0,r.a)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(a.h1,{id:"allora-price-prediction-worker-node-kurulumu",children:"Allora Price Prediction Worker Node Kurulumu"}),"\n",(0,l.jsx)(a.p,{children:(0,l.jsx)(a.a,{href:"https://docs.allora.network/datasci/walkthrough-price-prediction-worker#prerequisite",children:"Kaynak"})}),"\n",(0,l.jsx)(a.h2,{id:"sistemi-g\xfcncelleme-python-kurulumu-ve-gerekli-k\xfct\xfcphanelerin-kurulmas\u0131",children:"Sistemi G\xfcncelleme, Python Kurulumu ve Gerekli K\xfct\xfcphanelerin Kurulmas\u0131"}),"\n",(0,l.jsx)(a.pre,{children:(0,l.jsx)(a.code,{className:"language-shell",children:'apt update && apt upgrade -y\nsudo apt install python3 && sudo apt install python3-pip\napt install ca-certificates curl gnupg lsb-release git htop liblz4-tool screen wget make jq gcc unzip lz4 build-essential pkg-config libssl-dev libreadline-dev libffi-dev zlib1g-dev libncurses5-dev libgdbm-dev libnss3-dev -y < "/dev/null"\n'})}),"\n",(0,l.jsx)(a.h2,{id:"docker-kurulumu",children:"Docker Kurulumu"}),"\n",(0,l.jsx)(a.pre,{children:(0,l.jsx)(a.code,{className:"language-shell",children:"curl -fsSL https://get.docker.com -o get-docker.sh\nsudo sh get-docker.sh\n"})}),"\n",(0,l.jsx)(a.h2,{id:"docker-compose-kurulumu",children:"Docker Compose Kurulumu"}),"\n",(0,l.jsx)(a.pre,{children:(0,l.jsx)(a.code,{className:"language-shell",children:'curl -L "https://github.com/docker/compose/releases/download/1.29.2/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose\nchmod +x /usr/local/bin/docker-compose\n'})}),"\n",(0,l.jsx)(a.h3,{id:"go-kural\u0131m",children:"Go Kural\u0131m"}),"\n",(0,l.jsx)(a.pre,{children:(0,l.jsx)(a.code,{children:'ver="1.22.2" && \\\nwget "https://golang.org/dl/go$ver.linux-amd64.tar.gz" && \\\nrm -rf /usr/local/go && \\\ntar -C /usr/local -xzf "go$ver.linux-amd64.tar.gz" && \\\nrm "go$ver.linux-amd64.tar.gz" && \\\necho "export PATH=$PATH:/usr/local/go/bin:$HOME/go/bin" >> $HOME/.bash_profile && \\\nsource $HOME/.bash_profile\n'})}),"\n",(0,l.jsx)(a.h2,{id:"allora-ve-c\xfczdan-kurulumu",children:"Allora ve C\xfczdan Kurulumu"}),"\n",(0,l.jsx)(a.pre,{children:(0,l.jsx)(a.code,{className:"language-shell",children:"git clone https://github.com/allora-network/allora-chain.git\ncd allora-chain && make all\n"})}),"\n",(0,l.jsx)(a.h3,{id:"allora-c\xfczdan-kurulumu",children:"Allora C\xfczdan Kurulumu"}),"\n",(0,l.jsx)(a.pre,{children:(0,l.jsx)(a.code,{className:"language-shell",children:"allorad keys add CUZDAN_ADI\n"})}),"\n",(0,l.jsx)(a.h3,{id:"mevcut-c\xfczdan\u0131-i\u0307\xe7e-aktarma",children:"Mevcut C\xfczdan\u0131 \u0130\xe7e Aktarma"}),"\n",(0,l.jsx)(a.pre,{children:(0,l.jsx)(a.code,{className:"language-shell",children:"allorad keys add CUZDAN_ADI --recover\n"})}),"\n",(0,l.jsxs)(a.blockquote,{children:["\n",(0,l.jsx)(a.p,{children:"Ard\u0131ndan c\xfczdan\u0131n\u0131z\u0131 Keplr'e import edin."}),"\n"]}),"\n",(0,l.jsx)(a.h3,{id:"allora-a\u011f\u0131n\u0131-ekleme",children:"Allora A\u011f\u0131n\u0131 Ekleme"}),"\n",(0,l.jsxs)(a.p,{children:["Allora ",(0,l.jsx)(a.a,{href:"https://explorer.edgenet.allora.network/wallet/suggest",children:"explorer"})," sayfas\u0131na gidip a\u011f\u0131 ekleyin."]}),"\n",(0,l.jsx)(a.h3,{id:"allora-kontrol-paneli",children:"Allora Kontrol Paneli"}),"\n",(0,l.jsxs)(a.p,{children:["Allora ",(0,l.jsx)(a.a,{href:"https://app.allora.network",children:"kontrol paneli"}),"'nde puanlar\u0131m\u0131z\u0131 takip edece\u011fiz."]}),"\n",(0,l.jsx)(a.h3,{id:"musluk",children:"Musluk"}),"\n",(0,l.jsxs)(a.p,{children:["Allora c\xfczdan\u0131m\u0131za ",(0,l.jsx)(a.a,{href:"https://faucet.edgenet.allora.network/",children:"musluk"}),"'tan token istiyoruz."]}),"\n",(0,l.jsx)(a.h3,{id:"allora-worker-kurulumu",children:"Allora Worker Kurulumu"}),"\n",(0,l.jsx)(a.pre,{children:(0,l.jsx)(a.code,{className:"language-shell",children:"cd $HOME\ngit clone https://github.com/allora-network/basic-coin-prediction-node\n"})}),"\n",(0,l.jsx)(a.h3,{id:"data-dosyalar\u0131n\u0131-olu\u015fturma",children:"Data Dosyalar\u0131n\u0131 Olu\u015fturma"}),"\n",(0,l.jsx)(a.pre,{children:(0,l.jsx)(a.code,{className:"language-shell",children:"cd basic-coin-prediction-node\nmkdir worker-data\nmkdir head-data\n"})}),"\n",(0,l.jsx)(a.h3,{id:"data-dosya-i\u0307zinlerini-ayarlama",children:"Data Dosya \u0130zinlerini Ayarlama"}),"\n",(0,l.jsx)(a.pre,{children:(0,l.jsx)(a.code,{className:"language-shell",children:"chmod -R 777 worker-data\nchmod -R 777 head-data\n"})}),"\n",(0,l.jsx)(a.h3,{id:"head-key-olu\u015fturma",children:"Head Key Olu\u015fturma"}),"\n",(0,l.jsx)(a.pre,{children:(0,l.jsx)(a.code,{className:"language-shell",children:'docker run -it --entrypoint=bash -v ./head-data:/data alloranetwork/allora-inference-base:latest -c "mkdir -p /data/keys && (cd /data/keys && allora-keys)"\n'})}),"\n",(0,l.jsx)(a.h3,{id:"worker-key-olu\u015fturma",children:"Worker Key Olu\u015fturma"}),"\n",(0,l.jsx)(a.pre,{children:(0,l.jsx)(a.code,{className:"language-shell",children:'docker run -it --entrypoint=bash -v ./worker-data:/data alloranetwork/allora-inference-base:latest -c "mkdir -p /data/keys && (cd /data/keys && allora-keys)"\n'})}),"\n",(0,l.jsx)(a.h3,{id:"head-key-\xf6\u011frenme",children:"Head Key \xd6\u011frenme"}),"\n",(0,l.jsx)(a.pre,{children:(0,l.jsx)(a.code,{className:"language-shell",children:"cat head-data/keys/identity\n"})}),"\n",(0,l.jsxs)(a.blockquote,{children:["\n",(0,l.jsx)(a.p,{children:"Keyi kaydedin, a\u015fa\u011f\u0131daki b\xf6l\xfcmlerde laz\u0131m olacak."}),"\n"]}),"\n",(0,l.jsx)(a.h3,{id:"docker-composeyml-dosyas\u0131n\u0131-haz\u0131rlama",children:"docker-compose.yml Dosyas\u0131n\u0131 Haz\u0131rlama"}),"\n",(0,l.jsx)(a.h4,{id:"var-olan-dosyay\u0131-silme",children:"Var Olan Dosyay\u0131 Silme"}),"\n",(0,l.jsx)(a.pre,{children:(0,l.jsx)(a.code,{className:"language-shell",children:"rm docker-compose.yml\n"})}),"\n",(0,l.jsx)(a.h4,{id:"yeni-dosyay\u0131-haz\u0131rlama",children:"Yeni Dosyay\u0131 Haz\u0131rlama"}),"\n",(0,l.jsxs)(a.blockquote,{children:["\n",(0,l.jsxs)(a.p,{children:["A\u015fa\u011f\u0131daki varsay\u0131lan olarak kullan\u0131lacak portlar yaz\u0131lm\u0131\u015ft\u0131r. E\u011fer bu portlar sunucusunuzda kullan\u0131l\u0131yorsa bunlar\u0131 de\u011fi\u015ftirin.\n",(0,l.jsx)(a.code,{children:"MNEMONIC"})," b\xf6l\xfcm\xfcne c\xfczdan kelimelerini,\n",(0,l.jsx)(a.code,{children:"CUZDAN_ADI"})," b\xf6l\xfcm\xfcne c\xfczdan ad\u0131n\u0131z\u0131,\n",(0,l.jsx)(a.code,{children:"HEAD_ID"})," b\xf6l\xfcm\xfcne ise yukar\u0131da al\u0131nan head key kodunu yaz\u0131n. Ard\u0131ndan kodu \xe7al\u0131\u015ft\u0131r\u0131n."]}),"\n"]}),"\n",(0,l.jsx)(a.pre,{children:(0,l.jsx)(a.code,{className:"language-shell",children:'PY_PORT="8000"\nW_PORT1="9011"\nW_PORT2="9010"\nREST_PORT="6000"\nMNEMONIC=""\nHEAD_ID=""\nCUZDAN_ADI=""\n'})}),"\n",(0,l.jsxs)(a.blockquote,{children:["\n",(0,l.jsx)(a.p,{children:"\u015eimdi yeni dosyam\u0131z\u0131 olu\u015fturuyoruz a\u015fa\u011f\u0131daki kodu oldu\u011fu gibi \xe7al\u0131\u015ft\u0131r\u0131."}),"\n"]}),"\n",(0,l.jsx)(a.pre,{children:(0,l.jsx)(a.code,{className:"language-shell",children:'tee $HOME/basic-coin-prediction-node/docker-compose.yml > /dev/null << EOF\nversion: \'3\'\n\nservices:\n  inference:\n    container_name: inference-basic-eth-pred\n    build:\n      context: .\n    command: python -u /app/app.py\n    ports:\n      - "$PY_PORT:$PY_PORT"\n    networks:\n      eth-model-local:\n        aliases:\n          - inference\n        ipv4_address: 172.22.0.4\n    healthcheck:\n      test: ["CMD", "curl", "-f", "http://localhost:$PY_PORT/inference/ETH"]\n      interval: 10s\n      timeout: 10s\n      retries: 12\n    volumes:\n      - ./inference-data:/app/data\n\n  updater:\n    container_name: updater-basic-eth-pred\n    build: .\n    environment:\n      - INFERENCE_API_ADDRESS=http://inference:$PY_PORT\n    command: >\n      sh -c "\n      while true; do\n        python -u /app/update_app.py;\n        sleep 24h;\n      done\n      "\n    depends_on:\n      inference:\n        condition: service_healthy\n    networks:\n      eth-model-local:\n        aliases:\n          - updater\n        ipv4_address: 172.22.0.5\n\n  worker:\n    container_name: worker-basic-eth-pred\n    environment:\n      - INFERENCE_API_ADDRESS=http://inference:$PY_PORT\n      - HOME=/data\n    build:\n      context: .\n      dockerfile: Dockerfile_b7s\n    entrypoint:\n      - "/bin/bash"\n      - "-c"\n      - |\n        if [ ! -f /data/keys/priv.bin ]; then\n          echo "Generating new private keys..."\n          mkdir -p /data/keys\n          cd /data/keys\n          allora-keys\n        fi\n        # Change boot-nodes below to the key advertised by your head\n        allora-node --role=worker --peer-db=/data/peerdb --function-db=/data/function-db \\\n          --runtime-path=/app/runtime --runtime-cli=bls-runtime --workspace=/data/workspace \\\n          --private-key=/data/keys/priv.bin --log-level=debug --port=$W_PORT1 \\\n          --boot-nodes=/ip4/172.22.0.100/tcp/$W_PORT2/p2p/$HEAD_ID \\\n          --topic=allora-topic-1-worker \\\n          --allora-chain-key-name=$CUZDAN_ADI \\\n          --allora-chain-restore-mnemonic=\'$MNEMONIC\' \\\n          --allora-node-rpc-address=https://allora-rpc.edgenet.allora.network/ \\\n          --allora-chain-topic-id=1\n    volumes:\n      - ./worker-data:/data\n    working_dir: /data\n    depends_on:\n      - inference\n      - head\n    networks:\n      eth-model-local:\n        aliases:\n          - worker\n        ipv4_address: 172.22.0.10\n\n  head:\n    container_name: head-basic-eth-pred\n    image: alloranetwork/allora-inference-base-head:latest\n    environment:\n      - HOME=/data\n    entrypoint:\n      - "/bin/bash"\n      - "-c"\n      - |\n        if [ ! -f /data/keys/priv.bin ]; then\n          echo "Generating new private keys..."\n          mkdir -p /data/keys\n          cd /data/keys\n          allora-keys\n        fi\n        allora-node --role=head --peer-db=/data/peerdb --function-db=/data/function-db  \\\n          --runtime-path=/app/runtime --runtime-cli=bls-runtime --workspace=/data/workspace \\\n          --private-key=/data/keys/priv.bin --log-level=debug --port=$W_PORT2 --rest-api=:$REST_PORT\n    ports:\n      - "$REST_PORT:$REST_PORT"\n    volumes:\n      - ./head-data:/data\n    working_dir: /data\n    networks:\n      eth-model-local:\n        aliases:\n          - head\n        ipv4_address: 172.22.0.100\n\n\nnetworks:\n  eth-model-local:\n    driver: bridge\n    ipam:\n      config:\n        - subnet: 172.22.0.0/24\n\nvolumes:\n  inference-data:\n  worker-data:\n  head-data:\nEOF\n'})}),"\n",(0,l.jsx)(a.h2,{id:"allora-worker-ba\u015flatma",children:"Allora Worker Ba\u015flatma"}),"\n",(0,l.jsx)(a.pre,{children:(0,l.jsx)(a.code,{className:"language-shell",children:"cd $HOME/basic-coin-prediction-node\ndocker compose build\ndocker compose up -d\n"})}),"\n",(0,l.jsxs)(a.p,{children:["\ud83d\udea8 Ben ba\u015flat\u0131nca a\u015fa\u011f\u0131daki hatay\u0131 ald\u0131m. Yukar\u0131daki docker-compose.yml dosyas\u0131n d\xfczenlemesinde portlarla ili\u015fkili mi anlayamad\u0131m.\n",(0,l.jsx)(a.img,{src:"https://github.com/koltigin/Allora-Price-Prediction-Worker-Node/assets/102043225/bc7469e3-8cad-445d-8519-f94862f78bdf",alt:"image"})]}),"\n",(0,l.jsx)(a.h3,{id:"node-kontrol\xfc",children:"Node Kontrol\xfc"}),"\n",(0,l.jsxs)(a.p,{children:["Allora docker konteyn\u0131r (",(0,l.jsx)(a.code,{children:"basic-coin-prediction-node-worker"}),") id'sini almak i\xe7in a\u015fa\u011f\u0131daki kodu girin."]}),"\n",(0,l.jsx)(a.pre,{children:(0,l.jsx)(a.code,{className:"language-shell",children:"docker ps\n"})}),"\n",(0,l.jsxs)(a.p,{children:["A\u015fa\u011f\u0131daki kodda ",(0,l.jsx)(a.code,{children:"C_ID"})," b\xf6l\xfcm\xfcne id yaz\u0131p \xe7al\u0131\u015ft\u0131ral\u0131m."]}),"\n",(0,l.jsx)(a.pre,{children:(0,l.jsx)(a.code,{className:"language-shell",children:"docker logs -f C_ID\n"})}),"\n",(0,l.jsx)(a.p,{children:"A\u015fa\u011f\u0131daki gibi bir \xe7\u0131kt\u0131 alamn\u0131z gerekiyor."}),"\n",(0,l.jsx)(a.pre,{children:(0,l.jsx)(a.code,{className:"language-shell",children:".\n.\nSucces: register node TX Hash:\n.\n.\n"})}),"\n",(0,l.jsx)(a.h2,{id:"allora-puanlar\u0131",children:"Allora Puanlar\u0131"}),"\n",(0,l.jsxs)(a.p,{children:[(0,l.jsx)(a.a,{href:"https://app.allora.network?ref=eyJyZWZlcnJlcl9pZCI6IjBlNWRhMjlmLTc3YjItNDQ2NS1hYTcxLTk0NWI3NjRhMTA0ZiJ9",children:"Allora Points"})," sayfas\u0131na gidip c\xfczdan\u0131n\u0131z\u0131 ba\u011flay\u0131p puanlar\u0131n\u0131z\u0131 kontrol edebilirsiniz."]}),"\n",(0,l.jsx)(a.h4,{id:"allora-silme-komutlar\u0131",children:"Allora Silme Komutlar\u0131"}),"\n",(0,l.jsx)(a.pre,{children:(0,l.jsx)(a.code,{children:'rm -rf allora-chain\nrm -rf .allorad\nrm -rf basic-coin-prediction-node\nbash -c "$(curl -s https://raw.githubusercontent.com/blackowltr/Testnetler-ve-Rehberler/main/Allora/stop.sh)"\n'})})]})}function u(e={}){const{wrapper:a}={...(0,r.a)(),...e.components};return a?(0,l.jsx)(a,{...e,children:(0,l.jsx)(c,{...e})}):c(e)}},979:(e,a,n)=>{n.d(a,{Z:()=>l});const l=n.p+"assets/images/Allora-Service-Cover-cfd2d18aecc051f86a0c8e692e800e9b.jpg"},11151:(e,a,n)=>{n.d(a,{Z:()=>d,a:()=>i});var l=n(67294);const r={},o=l.createContext(r);function i(e){const a=l.useContext(o);return l.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function d(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),l.createElement(o.Provider,{value:a},e.children)}}}]);